$icon-font-path: '/wp-content/themes/consilience/assets/fonts/';

$red: #ea2626; //df222c;
$blue: #45b2c9;
$gray-lightish: #ccc;

$brand-primary: $blue;
$state-danger-text: $red;
//$brand-danger: $red;

$container-large-desktop: 970px;
$margin: 20px;

@import 'bootstrap';
@import 'font-awesome';

@mixin shadowed() {
	-webkit-box-shadow: 1px 1px 5px 0 rgba(0,0,0,0.5);
	   -moz-box-shadow: 1px 1px 5px 0 rgba(0,0,0,0.5);
	        box-shadow: 1px 1px 5px 0 rgba(0,0,0,0.5);
}

body {
	margin: $margin 0;
	font-family: Calibri, Candara, Segoe, "Segoe UI", Optima, Arial, sans-serif;
	
	a { 
		color: $red; 
		&:hover, &:focus { color: $blue; }
	}
	
	p { margin: 0 0 $margin; }
	
	h1, h2, h3, h4, .h1, .h2, .h3, .h4 { 
		font-family: "Tw Cen MT", "Gill Sans", "Century Gothic", sans-serif; 
		font-weight: bold;
	}
	
	.row {
		margin-bottom: $margin;
		&.banner {
			a.logo {
				text-indent: 100%;
				white-space: nowrap;
				overflow: hidden;
				width: 224px;
				height: 60px;
				background-image: url(../img/logo.svg);
				background-size: contain;
				background-repeat: no-repeat;
				max-width: 100%;
				display: block;
			}
		}
	}
	
	.row.footer {
		div { 
			margin-bottom: $margin; 
			&:first-child { margin: 0; }
		}
	}
	
	.navbar {
		border: 0;
		border-top: 3px solid $blue;
		border-radius: 0;
		background-color: $gray-lighter;
		margin: 0 -15px;
		button.navbar-toggle {
			border-color: $gray-lightish;
			span { border-top: 1px solid $gray-lightish; }
		}
		a { 
			color: inherit; 
			padding-left: $margin;
			padding-right: $margin;
			&:hover, &:focus { 
				background-color: $blue; 
				color: white;
			}
		}
		li.current-menu-item > a, li.dropdown.open > a, li.current-menu-ancestor, li.active > a { 
			background-color: $blue; 
			color: white;
			&:hover, &:focus { background-color: $blue; }
		}
		ul.dropdown-menu, li.open ul.dropdown-menu {
			background-color: $blue;
			box-shadow: none;
			border: 0;
			a {
				margin-right: 0;
				color: white;
				&:hover { text-decoration: underline; }
			}
		}
	}
	
	.page-header {
		border-color: $gray-lightish;
		margin: 0;
		h1 { font-weight: 700; }
	}
	
	.side-nav {
		strong {
			padding: 10px 15px;
			display: block;
		}
		li {
			font-size: 13px;
			border-top: 1px solid $gray-lightish;
			margin: 0;
			& > a { color: inherit; }
			&.current_page_item { background-color: $gray-lighter; }
		}
	}
	
	.content {
		font-size: 17px; 
		.lead {
			font-size: 21px;
			color: #aaa;
		}
	}
	
	#gallery {
		height: 300px; background-color: #f3f3f3; 
		.item {
			height: 300px;
			overflow: hidden;
			img {
				margin: 0 auto; 
				height: 300px;
				width: auto;
			}
		}
	}
	
	#gallery-controls {
		.thumbnail { 
			height: 70px; margin-bottom: 15px; cursor: pointer; border: 0; border-top: 3px solid transparent; 
			background-size: cover; background-position: center center; border-radius: 0; 
		}
		& > div.active .thumbnail { border-color: $blue; }
		hr { margin: 0 0 15px; }
	}
	
	&.home .content {
		.carousel {
			display: none; 
			margin-bottom: $margin;
			h1, h2 { text-shadow: 2px 2px black; }
			h2 {
				z-index: 3;
				position: absolute;
				left: 20px;
				top: 20px;
				color: white;
				font-size: 25px;
				width: 440px;
				margin: 0;
				padding: 0;
				font-style: italic;
			}
			.item {
				height: 400px;
				background-size: cover;
				background-position: center center;
				background-repeat: no-repeat;
			}
			#keywords {
				z-index: 3;
				color: white;
				position: absolute;
				right: 0;
				bottom: 30px;
				width: 250px;
				h1 {
					font-size: 40px;
					margin: 0 0 5px 0;
					opacity: 0;
					-webkit-transition: opacity 1s ease;
					-moz-transition: opacity 1s ease;
					-ms-transition: opacity 1s ease;
					-o-transition: opacity 1s ease;
					transition: opacity 1s ease;
					&.active { opacity: 1; }
				}				
			}
		}
		
		.row.mission {
			h3 { margin: 10px 0; font-size: 26px; }
			p:last-child { margin-bottom: 0; }
		}
		
		.row.domain-topics {
			font-size: 17px; text-align: center; margin-bottom: 0;
			a { 
				border-top: 3px solid $blue; background-color: $gray-lighter; 
				color: inherit; padding: 20px; display: block; margin-bottom: $margin;
				@include shadowed();
				&:hover { text-decoration: none; }
			}
		}
		.row.domain-topics, .row.about {
			strong { color: $red; font-style: italic; }
		}
		
		.row.about {
			font-size: 18px;
			margin-top: 15px;
			strong { color: $red; font-weight: bold; }
			.spotlight {
				font-size: 19px;
				min-height: 270px;
				background-image: url(../img/logo-tree.svg);
				background-repeat: no-repeat;
				background-size: contain;
				background-position: center center;
				small {
					background-color: $blue;
					color: white;
					display: block;
					padding: 2px 4px;
					margin-bottom: 15px;
				}
				h3 { margin: 0 0 10px; }
				img { 
				    float: left;
				    width: 90px;
				    height: auto;
				    margin: 8px 10px 10px 0;
				    @include shadowed();					
				}
			}
		}
	}
	
	&.page {
		form#contact {
			input, textarea, .btn {
				border-radius: 0;
			}
			textarea { height: 200px; }
		}		
	}
	
	&.post-type-archive-project {
		.row.projects {
			.filter {
				ul {
					padding: 0;
					list-style-type: none;
					li {
						cursor: pointer;
						padding: 10px; 
						border-bottom: 1px solid #ccc;
						text-indent: 0;
						&.active {
							background-color: #eee;
						}
					}
				}
			}
			.main {
				a {
					color: inherit;
					margin-bottom: 40px;
					font-size: 15px;
					& > div {
						height: 200px; background-size: contain; background-repeat: no-repeat;
						background-position: center center;
						background-color: #eee;
						margin-bottom: 4px;
					}
					&:hover {
						text-decoration: none;
					}
				}
			}
		}
	}
	
	&.single-projects {
		.side {
			h3 { margin-top: 0; }
			.testimonial {
				border-left: 5px solid #eee;
				padding-left: 10px; 
				font-size: 14px;
				font-style: italic;
			}
			.block {
				margin-bottom: $margin;
			}
		}
	}
}

@media (min-width: $screen-sm-min) {

	body {
		margin: $margin 0;
		.navbar { margin: 0; }
		ul#menu-main { float: right; }
		&.home .content .carousel { display: block; }
		.mission p { margin-bottom: 8px; }
		.row.domain-topics a {
			min-height: 116px;
		}
	}
	
}

@media (min-width: $screen-md-min) {
	.navbar { margin-bottom: 0; }
	.navbar-collapse { padding-right: 0; }	
}

@media (min-width: $screen-lg-min) {
	
}

/*
  Bootstrap Carousel Fade Transition (for Bootstrap 3.3.x)
  CSS from:       http://codepen.io/transportedman/pen/NPWRGq
  and:            http://stackoverflow.com/questions/18548731/bootstrap-3-carousel-fading-to-new-slide-instead-of-sliding-to-new-slide
  Inspired from:  http://codepen.io/Rowno/pen/Afykb 
*/
.carousel-fade .carousel-inner .item {
  opacity: 0;
  transition-property: opacity;
}

.carousel-fade .carousel-inner .active {
  opacity: 1;
}

.carousel-fade .carousel-inner .active.left,
.carousel-fade .carousel-inner .active.right {
  left: 0;
  opacity: 0;
  z-index: 1;
}

.carousel-fade .carousel-inner .next.left,
.carousel-fade .carousel-inner .prev.right {
  opacity: 1;
}

.carousel-fade .carousel-control {
  z-index: 2;
}

/*
  WHAT IS NEW IN 3.3: "Added transforms to improve carousel performance in modern browsers."
  Need to override the 3.3 new styles for modern browsers & apply opacity
*/
@media all and (transform-3d), (-webkit-transform-3d) {
    .carousel-fade .carousel-inner > .item.next,
    .carousel-fade .carousel-inner > .item.active.right {
      opacity: 0;
      -webkit-transform: translate3d(0, 0, 0);
              transform: translate3d(0, 0, 0);
    }
    .carousel-fade .carousel-inner > .item.prev,
    .carousel-fade .carousel-inner > .item.active.left {
      opacity: 0;
      -webkit-transform: translate3d(0, 0, 0);
              transform: translate3d(0, 0, 0);
    }
    .carousel-fade .carousel-inner > .item.next.left,
    .carousel-fade .carousel-inner > .item.prev.right,
    .carousel-fade .carousel-inner > .item.active {
      opacity: 1;
      -webkit-transform: translate3d(0, 0, 0);
              transform: translate3d(0, 0, 0);
    }
}
