$icon-font-path: '/wp-content/themes/consilience/assets/fonts/';

$red: #ea2626; //df222c;
$red-variation: #c22;
$gray-lightish: #ccc;
$gray-dark: #222;
$white: #fff;
$font-body: Calibri, Candara, Segoe, "Segoe UI", Optima, Arial, sans-serif;
//$font-heading: "Tw Cen MT", "Gill Sans", "Century Gothic", sans-serif;
//$font-heading: "Helvetica Neue", Helvetica, Arial, sans-serif;
$font-heading: "acumin-pro", sans-serif;
$brand-primary: $red;
$state-danger-text: $red;
//$brand-danger: $red;

//$container-large-desktop: 970px;
$margin: 20px;

@import 'bootstrap';
@import 'font-awesome';

@mixin shadowed() {
	-webkit-box-shadow: 1px 1px 5px 0 rgba(0,0,0,0.5);
	   -moz-box-shadow: 1px 1px 5px 0 rgba(0,0,0,0.5);
	        box-shadow: 1px 1px 5px 0 rgba(0,0,0,0.5);
}

body {
	
	background-color: $gray-dark;
	color: $gray-light; 
	font-family: $font-body;
	
	//global tags
	a { 
		color: $red; 
		&:hover, &:focus { color: $red-variation; }
	}
	
	p { margin: 0 0 $margin; }
	
	h1, h2, h3, h4, .h1, .h2, .h3, .h4 { 
		font-family: $font-heading; 
		font-weight: 600;
	}
	
	//helpers
	.align-left { text-align: left; }
	.align-center { text-align: center; }
	.align-right { text-align: right; }

	header, footer { padding: $margin 0; }
	
	header {
		background-color: $red;
		a.logo {
			text-indent: 100%;
			white-space: nowrap;
			overflow: hidden;
			//458 x 126
			width: 229px;
			height: 63px;
			background-image: url(../img/logo-white.svg);
			background-size: contain;
			background-repeat: no-repeat;
			max-width: 100%;
			display: block;
		}
	}
	
	nav {
		background-color: $red-variation;
		.navbar {
			border: 0;
			margin-bottom: 0;
			button.navbar-toggle {
				border-color: $gray-lightish;
				span { border-top: 1px solid $gray-lightish; }
			}
			a { 
				color: $gray-lightish; 
				padding-left: $margin;
				padding-right: $margin;
				&:hover, &:focus { 
					background-color: $red; 
					color: $white;
				}
			}
			li.current-menu-item > a, li.dropdown.open > a, li.current-menu-ancestor > a, li.active > a { 
				background-color: $red; 
				color: $white;
				&:hover, &:focus { background-color: $red; }
			}
			ul.dropdown-menu, li.open ul.dropdown-menu {
				background-color: $red;
				box-shadow: none;
				border: 0;
				a {
					margin-right: 0;
					color: $white;
					&:hover { text-decoration: underline; }
				}
			}
		}		
	}
	
	main {
		background-color: $white;
		color: $gray-dark;
		min-height: 400px;
			
		.row > div { margin-bottom: $margin; }

		.page-header {
			border-color: $gray-lightish;
			h1 { font-weight: 700; }
		}
		
		.side-nav {
			strong {
				padding: 10px 15px;
				display: block;
			}
			li {
				font-size: 13px;
				border-top: 1px solid $gray-lightish;
				margin: 0;
				& > a { color: inherit; }
				&.current_page_item { background-color: $gray-lighter; }
			}
		}
		
		.content {
			font-size: 17px; 
			.lead {
				font-size: 21px;
				color: #aaa;
			}
		}
		
		#gallery {
			height: 300px; background-color: #f3f3f3; 
			.item {
				height: 300px;
				overflow: hidden;
				img {
					margin: 0 auto; 
					height: 300px;
					width: auto;
				}
			}
		}
		
		#gallery-controls {
			.thumbnail { 
				height: 70px; margin-bottom: 15px; cursor: pointer; border: 0; border-top: 3px solid transparent; 
				background-size: cover; background-position: center center; border-radius: 0; 
			}
			& > div.active .thumbnail { border-color: $red; }
			hr { margin: 0 0 15px; }
		}
	}	

	footer {
		font-size: 15px;

		.row > div { margin-bottom: $margin; }
	}
	
	//template-specific styles
	&.home {
		.carousel {
			display: none; 
			.item {
				height: 550px;
				background-size: cover;
				background-position: center center;
				background-repeat: no-repeat;
			}
			h1#keywords {
				z-index: 3;
				color: white;
				position: absolute;
				width: 100%;
				top: 50%;
				text-shadow: 2px 2px black;
				text-align: center;
				margin: 0;
				height: 0;
				line-height: 0;
				overflow: visible;
				font-size: 70px;
				font-weight: 100;
				span {
					opacity: 0;
					-webkit-transition: opacity 1s ease;
					-moz-transition: opacity 1s ease;
					-ms-transition: opacity 1s ease;
					-o-transition: opacity 1s ease;
					transition: opacity 1s ease;
					& + span { margin-left: $margin * 2; }
					&.active { opacity: 1; }
				}
			}
		}
		
		.mission {
			padding: $margin;
			background-color: $gray-lighter;
			h3 { margin: 10px 0; font-size: 25px; text-align: center; }
		}
		
		.domains {
			background-image: url(../img/people.jpg);
			background-size: cover;
			background-repeat: no-repeat;
			text-align: center;
			.row {
				margin: -1px 0 0 -1px;
				div {
					margin-bottom: 0;
					display: table;
					padding: 1px 0 0 1px;
					a {
						display: table-cell;
						vertical-align: middle;
						height: 200px;
						background-color: rgba(0, 0, 0, .5);
						color: $white;
						-webkit-transition: background .5s ease-out;
						-moz-transition: background .5s ease-out;
						-o-transition: background .5s ease-out;
						transition: background .5s ease-out;
						h4 {
							padding: 4px 10px;
							background-color: $gray-dark;
							display: inline; 	
						}
						&:hover {
							background-color: rgba(0, 0, 0, 0);
							text-decoration: none;
						}
					}
				}
			}
		}

		.row.about {
			font-size: 42px;
			margin-top: 15px;
			strong { color: $red; font-weight: bold; }
			.spotlight {
				font-size: 19px;
				min-height: 270px;
				background-image: url(../img/logo-tree.svg);
				background-repeat: no-repeat;
				background-size: contain;
				background-position: center center;
				small {
					background-color: $red;
					color: white;
					display: block;
					padding: 2px 4px;
					margin-bottom: 15px;
				}
				h3 { margin: 0 0 10px; }
				img { 
				    float: left;
				    width: 90px;
				    height: auto;
				    margin: 8px 10px 10px 0;
				    @include shadowed();					
				}
			}
		}
	}
	
	&.page {
		form#contact {
			input, textarea, .btn {
				border-radius: 0;
			}
			textarea { height: 200px; }
		}		
	}
	
	&.post-type-archive-project {
		.row.projects {
			.filter {
				ul {
					padding: 0;
					list-style-type: none;
					li {
						cursor: pointer;
						padding: 10px; 
						border-bottom: 1px solid #ccc;
						text-indent: 0;
						&.active {
							background-color: #eee;
						}
					}
				}
			}
			.main {
				a {
					color: inherit;
					margin-bottom: 40px;
					font-size: 15px;
					& > div {
						height: 200px; background-size: contain; background-repeat: no-repeat;
						background-position: center center;
						background-color: #eee;
						margin-bottom: 4px;
					}
					&:hover {
						text-decoration: none;
					}
				}
			}
		}
	}
	
	&.single-projects {
		.side {
			h3 { margin-top: 0; }
			.testimonial {
				border-left: 5px solid #eee;
				padding-left: 10px; 
				font-size: 14px;
				font-style: italic;
			}
			.block {
				margin-bottom: $margin;
			}
		}
	}
}

@media (min-width: $screen-sm-min) {

	body {
		#menu-main {
			text-align: center;
			width: 100%;
			li {
				display: inline-block;
				float: none;
			}
		}
		&.home .carousel { display: block; }
		.mission p { margin-bottom: 8px; }
		.row.domain-topics a {
			min-height: 116px;
		}
	}
	
}

@media (min-width: $screen-md-min) {
}

@media (min-width: $screen-lg-min) {
	
}

/*
  Bootstrap Carousel Fade Transition (for Bootstrap 3.3.x)
  CSS from:       http://codepen.io/transportedman/pen/NPWRGq
  and:            http://stackoverflow.com/questions/18548731/bootstrap-3-carousel-fading-to-new-slide-instead-of-sliding-to-new-slide
  Inspired from:  http://codepen.io/Rowno/pen/Afykb 
*/
.carousel-fade .carousel-inner .item {
  opacity: 0;
  transition-property: opacity;
}

.carousel-fade .carousel-inner .active {
  opacity: 1;
}

.carousel-fade .carousel-inner .active.left,
.carousel-fade .carousel-inner .active.right {
  left: 0;
  opacity: 0;
  z-index: 1;
}

.carousel-fade .carousel-inner .next.left,
.carousel-fade .carousel-inner .prev.right {
  opacity: 1;
}

.carousel-fade .carousel-control {
  z-index: 2;
}

/*
  WHAT IS NEW IN 3.3: "Added transforms to improve carousel performance in modern browsers."
  Need to override the 3.3 new styles for modern browsers & apply opacity
*/
@media all and (transform-3d), (-webkit-transform-3d) {
    .carousel-fade .carousel-inner > .item.next,
    .carousel-fade .carousel-inner > .item.active.right {
      opacity: 0;
      -webkit-transform: translate3d(0, 0, 0);
              transform: translate3d(0, 0, 0);
    }
    .carousel-fade .carousel-inner > .item.prev,
    .carousel-fade .carousel-inner > .item.active.left {
      opacity: 0;
      -webkit-transform: translate3d(0, 0, 0);
              transform: translate3d(0, 0, 0);
    }
    .carousel-fade .carousel-inner > .item.next.left,
    .carousel-fade .carousel-inner > .item.prev.right,
    .carousel-fade .carousel-inner > .item.active {
      opacity: 1;
      -webkit-transform: translate3d(0, 0, 0);
              transform: translate3d(0, 0, 0);
    }
}
